import{p as S}from"./index-Dy79iS0B.js";/* empty css                   */import{u as X}from"./usePagination-NdQ2qoRW.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                  */import{H as Y,I as Z,J as ee,z as ae,M as le,y as te,N as oe,O as ne,n as se,W as ie,Q as re,R as ue,S as de,T as pe,U as me,V as ce,_ as _e,E as _}from"./element-B-FiLDCl.js";/* empty css                       */import{v as fe,r as f,aE as B,W as P,j as ge,x as D,y as V,O as a,G as ve,F as o,u,K as g,E as I,B as C,L,I as he,M as ke,ab as Ce}from"./vue-Cwi6Gi-M.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-5K_zVHhu.js";function Ve(p){return S({url:"/admin/cheat_tool/list",method:"post",data:p})}function ye(p){return S({url:"/admin/cheat_tool/update",method:"post",data:p})}function Te(p){return S({url:"/admin/cheat_tool/add",method:"post",data:p})}function Ee(p){return S({url:"/admin/cheat_tool/delete",method:"post",data:{id:p}})}const Se={class:"app-container"},Fe={class:"toolbar-wrapper"},ze={class:"table-wrapper"},Pe=["href"],De={key:0},we={class:"pager-wrapper"},xe=fe({__name:"index",setup(p){const y=f(!1),v=f(!1),b=f(!1),h=f(!1),F=f(""),{paginationData:i,handleCurrentChange:M,handleSizeChange:$}=X(),z=f([]),w=B("searchFormRef"),T=P({name:""}),x=B("cheatToolFormRef"),l=P({id:"",name:"",domain:"",link:"",ip_list:[],process_win:"",process_mac:""}),A=P({name:[{required:!0,message:"The name is required.",trigger:"blur"}],domain:[{required:!0,message:"The domain is required.",trigger:"blur"}],link:[{required:!0,message:"The link is required.",trigger:"blur"}]}),k=f("");function R(n){n?(F.value="Edit Cheat Tool",l.id=n.id,l.name=n.name,l.domain=n.domain,l.link=n.link,l.ip_list=n.ip_list||[],k.value=(l.ip_list||[]).join(","),l.process_win=n.process_win||"",l.process_mac=n.process_mac||""):(F.value="Add Cheat Tool",l.id="",l.name="",l.domain="",l.link="",l.ip_list=[],k.value="",l.process_win="",l.process_mac=""),h.value=!0}function W(n){_e.confirm(`Are you sure to delete this tool "${n.name}"`,"Confirm",{type:"warning"}).then(()=>{n.id&&(b.value||(b.value=!0,Ee(n.id).then(e=>{e.success?(_.success("Succeed to delete."),m()):_.error(e.message||"Failed to delete.")}).finally(()=>{b.value=!1})))}).catch(()=>{b.value=!1})}function O(){var n;v.value||(v.value=!0,(n=x.value)==null||n.validate(e=>{if(!e){_.error("The form validation failed."),v.value=!1;return}const d=k.value?k.value.split(",").map(s=>s.trim()):[],r={id:l.id,name:l.name,domain:l.domain,link:l.link,ip_list:d,process_win:l.process_win,process_mac:l.process_mac};l.id?ye(r).then(s=>{s.success?(_.success("Succeed to update."),h.value=!1,m()):_.error(s.message||"Failed to update.")}).finally(()=>{v.value=!1}):Te(r).then(s=>{s.success?(_.success("Succeed to add."),h.value=!1,m()):_.error(s.message||"Failed to add.")}).finally(()=>{v.value=!1})}))}function j(){var n;(n=w.value)==null||n.resetFields(),m()}function m(){if(y.value)return;y.value=!0;const n={name:T.name,curPage:i.currentPage-1,pagSize:i.pageSize};Ve(n).then(e=>{e.success&&e.data&&e.pagination?(z.value=e.data.cheat_tool_list,i.total=e.pagination.total):(z.value=[],i.total=0)}).finally(()=>{y.value=!1})}return ge([()=>i.currentPage,()=>i.pageSize],m,{immediate:!0}),(n,e)=>{const d=ee,r=Z,s=ae,U=Y,N=oe,q=se,c=de,G=pe,H=ue,J=me,K=ce,Q=ne;return V(),D("div",Se,[a(N,{shadow:"never",class:"search-wrapper"},{default:o(()=>[a(U,{inline:!0,model:T,ref_key:"searchFormRef",ref:w},{default:o(()=>[a(r,{label:"Name",prop:"name"},{default:o(()=>[a(d,{modelValue:T.name,"onUpdate:modelValue":e[0]||(e[0]=t=>T.name=t),placeholder:"Search name"},null,8,["modelValue"])]),_:1}),a(r,null,{default:o(()=>[a(s,{type:"primary",icon:u(le),onClick:m},{default:o(()=>e[10]||(e[10]=[g(" Search ")])),_:1,__:[10]},8,["icon"]),a(s,{icon:u(te),onClick:j},{default:o(()=>e[11]||(e[11]=[g(" Reset ")])),_:1,__:[11]},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),ve((V(),I(N,{shadow:"never"},{default:o(()=>[C("div",Fe,[e[12]||(e[12]=C("div",null,null,-1)),C("div",null,[a(q,{content:"Add new"},{default:o(()=>[a(s,{type:"primary",icon:u(ie),circle:"",onClick:e[1]||(e[1]=t=>R())},null,8,["icon"])]),_:1}),a(q,{content:"Refresh current page"},{default:o(()=>[a(s,{type:"primary",icon:u(re),circle:"",onClick:m},null,8,["icon"])]),_:1})])]),C("div",ze,[a(H,{data:z.value,class:"w-full"},{default:o(()=>[a(c,{prop:"name",label:"Name"}),a(c,{prop:"domain",label:"Domain"}),a(c,{prop:"link",label:"Link"},{default:o(({row:t})=>[C("a",{href:t.link,target:"_blank"},L(t.link),9,Pe)]),_:1}),a(c,{prop:"ip_list",label:"IPs"},{default:o(({row:t})=>[t.ip_list&&t.ip_list.length?(V(),D("div",De,[(V(!0),D(ke,null,Ce(t.ip_list,E=>(V(),I(G,{key:E,class:"ip-tag"},{default:o(()=>[g(L(E),1)]),_:2},1024))),128))])):he("",!0)]),_:1}),a(c,{prop:"process_win",label:"Win-Process"}),a(c,{prop:"process_mac",label:"Mac-Process"}),a(c,{fixed:"right",label:"Action",width:"150"},{default:o(({row:t})=>[a(s,{plain:"",type:"primary",size:"small",onClick:E=>R(t)},{default:o(()=>e[13]||(e[13]=[g(" Edit ")])),_:2,__:[13]},1032,["onClick"]),a(s,{type:"danger",size:"small",onClick:E=>W(t)},{default:o(()=>e[14]||(e[14]=[g(" Delete ")])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),C("div",we,[a(J,{background:"",layout:u(i).layout,"page-sizes":u(i).pageSizes,total:u(i).total,"page-size":u(i).pageSize,"current-page":u(i).currentPage,onSizeChange:u($),onCurrentChange:u(M)},null,8,["layout","page-sizes","total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1})),[[Q,y.value||b.value]]),a(K,{modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=t=>h.value=t),title:F.value,width:"500px"},{footer:o(()=>[a(s,{onClick:e[8]||(e[8]=t=>h.value=!1)},{default:o(()=>e[15]||(e[15]=[g(" Cancel ")])),_:1,__:[15]}),a(s,{type:"primary",loading:v.value,onClick:O},{default:o(()=>e[16]||(e[16]=[g(" Save ")])),_:1,__:[16]},8,["loading"])]),default:o(()=>[a(U,{model:l,rules:A,ref_key:"cheatToolFormRef",ref:x,"label-width":"120px","label-position":"left"},{default:o(()=>[a(r,{label:"Name",prop:"name"},{default:o(()=>[a(d,{modelValue:l.name,"onUpdate:modelValue":e[2]||(e[2]=t=>l.name=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"Domain",prop:"domain"},{default:o(()=>[a(d,{modelValue:l.domain,"onUpdate:modelValue":e[3]||(e[3]=t=>l.domain=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"Link",prop:"link"},{default:o(()=>[a(d,{modelValue:l.link,"onUpdate:modelValue":e[4]||(e[4]=t=>l.link=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"IPs (comma separated)",prop:"ip_list"},{default:o(()=>[a(d,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=t=>k.value=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"Win Process",prop:"process_win"},{default:o(()=>[a(d,{modelValue:l.process_win,"onUpdate:modelValue":e[6]||(e[6]=t=>l.process_win=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"Mac Process",prop:"process_mac"},{default:o(()=>[a(d,{modelValue:l.process_mac,"onUpdate:modelValue":e[7]||(e[7]=t=>l.process_mac=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Ke=be(xe,[["__scopeId","data-v-837f0d0d"]]);export{Ke as default};
