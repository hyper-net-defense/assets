import{p as V}from"./index-Dy79iS0B.js";/* empty css                   */import{u as j}from"./usePagination-NdQ2qoRW.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                  */import{H as G,I as H,J,z as K,M as Q,y as X,N as Y,O as Z,n as ee,W as ae,Q as le,R as te,S as oe,U as ne,V as re,E as c,_ as se}from"./element-B-FiLDCl.js";/* empty css                       */import{v as ie,r as d,aE as x,W as ue,j as pe,x as de,y as D,O as a,G as me,F as l,u as s,K as g,E as ce,B as C}from"./vue-Cwi6Gi-M.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-5K_zVHhu.js";function _e(u){return V({url:"/admin/remote_app/list",method:"post",data:u})}function ve(u){return V({url:"/admin/remote_app/add",method:"post",data:u})}function ge(u){return V({url:"/admin/remote_app/update",method:"post",data:u})}function ke(u){return V({url:"/admin/remote_app/delete",method:"post",data:{id:u}})}const ye={class:"app-container"},Ce={class:"toolbar-wrapper"},be={class:"table-wrapper"},he={class:"pager-wrapper"},Ve=ie({__name:"index",setup(u){const b=d(!1),f=d(!1),k=d(!1),h=d({name:""}),E=x("searchFormRef"),A=d([]),_=d(!1),R=d(""),n=d({id:"",name:"",link:"",process_win:"",process_mac:""}),T=ue({name:[{required:!0,trigger:"blur",message:"The name is required."}],link:[{required:!0,trigger:"blur",message:"The link is required."}]}),w=x("remoteAppFormRef"),{paginationData:i,handleCurrentChange:B,handleSizeChange:N}=j();function m(){if(b.value)return;b.value=!0;const o={name:h.value.name,curPage:i.currentPage,pageSize:i.pageSize};_e(o).then(e=>{e.success&&e.data&&e.pagination?(A.value=e.data.remote_app_list,i.total=e.pagination.total):(A.value=[],i.total=0)}).finally(()=>{b.value=!1})}function F(o){o?(R.value="Edit Remote App",n.value={...o}):(R.value="Add Remote App",n.value={id:"",name:"",link:"",process_win:"",process_mac:""}),_.value=!0}function U(){var o;f.value||(f.value=!0,(o=w.value)==null||o.validate(e=>{if(!e){c.error("The form validation failed."),f.value=!1;return}n.value.id?ge(n.value).then(r=>{r.success?(c.success("Succeed to update."),_.value=!1,m()):c.error(r.message||"Failed to update.")}).finally(()=>{f.value=!1}):ve(n.value).then(r=>{r.success?(c.success("Succeed to add."),_.value=!1,m()):c.error(r.message||"Failed to add.")}).finally(()=>{f.value=!1})}))}function L(o){se.confirm(`Are you sure to delete this app "${o.name}"?`,"Confirm",{type:"warning"}).then(()=>{o.id&&(k.value||(k.value=!0,ke(o.id).then(e=>{e.success?(c.success("Succeed to delete."),m()):c.error(e.message||"Failed to delete.")}).finally(()=>{k.value=!1})))}).catch(()=>{k.value=!1})}function q(){var o;(o=E.value)==null||o.resetFields(),m()}return pe([()=>i.currentPage,()=>i.pageSize],m,{immediate:!0}),(o,e)=>{const r=J,v=H,p=K,S=G,P=Y,z=ee,y=oe,M=te,$=ne,I=re,W=Z;return D(),de("div",ye,[a(P,{shadow:"never",class:"search-wrapper"},{default:l(()=>[a(S,{inline:!0,ref_key:"searchFormRef",ref:E,model:h.value},{default:l(()=>[a(v,{label:"Name",prop:"name"},{default:l(()=>[a(r,{modelValue:h.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>h.value.name=t),placeholder:"Search name",clearable:""},null,8,["modelValue"])]),_:1}),a(v,null,{default:l(()=>[a(p,{type:"primary",icon:s(Q),onClick:m},{default:l(()=>e[8]||(e[8]=[g(" Search ")])),_:1,__:[8]},8,["icon"]),a(p,{icon:s(X),onClick:q},{default:l(()=>e[9]||(e[9]=[g(" Reset ")])),_:1,__:[9]},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),me((D(),ce(P,{shadow:"never"},{default:l(()=>[C("div",Ce,[e[10]||(e[10]=C("div",null,null,-1)),C("div",null,[a(z,{content:"Add new"},{default:l(()=>[a(p,{type:"primary",icon:s(ae),circle:"",onClick:e[1]||(e[1]=t=>F())},null,8,["icon"])]),_:1}),a(z,{content:"Refresh current page"},{default:l(()=>[a(p,{type:"primary",icon:s(le),circle:"",onClick:m},null,8,["icon"])]),_:1})])]),C("div",be,[a(M,{data:A.value,stripe:""},{default:l(()=>[a(y,{prop:"name",label:"Name"}),a(y,{prop:"link",label:"Link"}),a(y,{prop:"process_win",label:"Win Process"}),a(y,{prop:"process_mac",label:"Mac Process"}),a(y,{label:"Action",width:"150"},{default:l(({row:t})=>[a(p,{plain:"",type:"primary",size:"small",onClick:O=>F(t)},{default:l(()=>e[11]||(e[11]=[g(" Edit ")])),_:2,__:[11]},1032,["onClick"]),a(p,{type:"danger",size:"small",onClick:O=>L(t)},{default:l(()=>e[12]||(e[12]=[g(" Delete ")])),_:2,__:[12]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),C("div",he,[a($,{background:"",layout:s(i).layout,total:s(i).total,"page-size":s(i).pageSize,"current-page":s(i).currentPage,onCurrentChange:s(B),onSizeChange:s(N)},null,8,["layout","total","page-size","current-page","onCurrentChange","onSizeChange"])])]),_:1})),[[W,b.value||k.value]]),a(I,{title:R.value,modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=t=>_.value=t),width:"500px"},{footer:l(()=>[a(p,{onClick:e[6]||(e[6]=t=>_.value=!1)},{default:l(()=>e[13]||(e[13]=[g(" Cancel ")])),_:1,__:[13]}),a(p,{type:"primary",loading:f.value,onClick:U},{default:l(()=>e[14]||(e[14]=[g(" Save ")])),_:1,__:[14]},8,["loading"])]),default:l(()=>[a(S,{model:n.value,rules:s(T),ref_key:"remoteAppFormRef",ref:w,"label-width":"120px","label-position":"left"},{default:l(()=>[a(v,{label:"Name",prop:"name"},{default:l(()=>[a(r,{modelValue:n.value.name,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.name=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Link",prop:"link"},{default:l(()=>[a(r,{modelValue:n.value.link,"onUpdate:modelValue":e[3]||(e[3]=t=>n.value.link=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Win Process",prop:"process_win"},{default:l(()=>[a(r,{modelValue:n.value.process_win,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.process_win=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Mac Process",prop:"process_mac"},{default:l(()=>[a(r,{modelValue:n.value.process_mac,"onUpdate:modelValue":e[5]||(e[5]=t=>n.value.process_mac=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Me=fe(Ve,[["__scopeId","data-v-c8542488"]]);export{Me as default};
