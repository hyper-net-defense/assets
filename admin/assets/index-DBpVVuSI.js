import{p as D}from"./index-Dy79iS0B.js";/* empty css                   */import{u as K}from"./usePagination-NdQ2qoRW.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                  */import{H as Q,I as W,J as Y,z as X,M as Z,y as ee,N as ae,O as le,n as te,W as oe,Q as ne,R as ie,S as se,T as re,U as ue,A as de,V as me,E as v,_ as pe}from"./element-B-FiLDCl.js";/* empty css                       */import{v as ce,r,aE as P,j as fe,x as _e,y as C,O as a,G as ve,F as l,u as s,K as p,E as S,B as h}from"./vue-Cwi6Gi-M.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-5K_zVHhu.js";function he(u){return D({url:"/admin/black_domain/list",method:"post",data:u})}function ke(u){return D({url:"/admin/black_domain/add",method:"post",data:u})}function be(u){return D({url:"/admin/black_domain/update",method:"post",data:u})}function ye(u){return D({url:"/admin/black_domain/delete",method:"post",data:{id:u}})}const Ce={class:"app-container"},De={class:"toolbar-wrapper"},Ee={class:"table-wrapper"},Fe={class:"pager-wrapper"},Ve=ce({__name:"index",setup(u){const k=r(!1),f=r(!1),g=r(!1),A=P("signedAppFormRef"),B=P("searchFormRef"),b=r({domain:""}),E=r([]),{paginationData:n,handleCurrentChange:q,handleSizeChange:N}=K(),_=r(!1),F=r(""),i=r({id:"",domain:"",is_cheat:!0}),U=r({domain:[{required:!0,message:"The domain is required.",trigger:"blur"}],is_cheat:[{required:!0,message:"The cheat is required.",trigger:"blur"}]});function c(){k.value||(k.value=!0,he({domain:b.value.domain,curPage:n.currentPage,pageSize:n.pageSize}).then(t=>{t.success&&t.data&&t.pagination?(E.value=t.data.block_domain_list,n.total=t.pagination.total):(E.value=[],n.total=0)}).finally(()=>{k.value=!1}))}function w(t){t?(F.value="Edit Black Domain",i.value={...t}):(F.value="Add Black Domain",i.value={id:"",domain:"",is_cheat:!0}),_.value=!0}function $(){var t;f.value||(f.value=!0,(t=A.value)==null||t.validate(e=>{if(!e){v.error("Form validation failed."),f.value=!1;return}i.value.id?be(i.value).then(d=>{d.success?(v.success("Succeed to update."),_.value=!1,c()):v.error(d.message||"Failed to update.")}).finally(()=>{f.value=!1}):ke(i.value).then(d=>{d.success?(v.success("Succeed to add."),_.value=!1,c()):v.error(d.message||"Failed to add.")}).finally(()=>{f.value=!1})}))}function I(t){pe.confirm(`Are you sure to delete this domain "${t.domain}"?`,"Confirm",{type:"warning"}).then(()=>{t.id&&(g.value||(g.value=!0,ye(t.id).then(e=>{e.success?c():v.error(e.message||"Failed to delete.")}).finally(()=>{g.value=!1})))}).catch(()=>{g.value=!1})}function L(){var t;(t=B.value)==null||t.resetFields(),c()}return fe([()=>n.currentPage,()=>n.pageSize],c,{immediate:!0}),(t,e)=>{const d=Y,y=W,m=X,z=Q,R=ae,x=te,V=se,T=re,M=ie,O=ue,j=de,G=me,H=le;return C(),_e("div",Ce,[a(R,{shadow:"never",class:"search-wrapper"},{default:l(()=>[a(z,{inline:!0,ref_key:"searchFormRef",ref:B,model:b.value},{default:l(()=>[a(y,{label:"Domain",prop:"domain"},{default:l(()=>[a(d,{modelValue:b.value.domain,"onUpdate:modelValue":e[0]||(e[0]=o=>b.value.domain=o),placeholder:"Search domain",clearable:""},null,8,["modelValue"])]),_:1}),a(y,null,{default:l(()=>[a(m,{type:"primary",icon:s(Z),onClick:c},{default:l(()=>e[6]||(e[6]=[p(" Search ")])),_:1,__:[6]},8,["icon"]),a(m,{icon:s(ee),onClick:L},{default:l(()=>e[7]||(e[7]=[p(" Reset ")])),_:1,__:[7]},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),ve((C(),S(R,{shadow:"never"},{default:l(()=>[h("div",De,[e[8]||(e[8]=h("div",null,null,-1)),h("div",null,[a(x,{content:"Add new"},{default:l(()=>[a(m,{type:"primary",icon:s(oe),circle:"",onClick:e[1]||(e[1]=o=>w())},null,8,["icon"])]),_:1}),a(x,{content:"Refresh current page"},{default:l(()=>[a(m,{type:"primary",icon:s(ne),circle:"",onClick:c},null,8,["icon"])]),_:1})])]),h("div",Ee,[a(M,{data:E.value,stripe:""},{default:l(()=>[a(V,{prop:"domain",label:"Domain"}),a(V,{prop:"is_cheat",label:"Cheat"},{default:l(({row:o})=>[o.is_cheat?(C(),S(T,{key:0,type:"success"},{default:l(()=>e[9]||(e[9]=[p(" Yes ")])),_:1,__:[9]})):(C(),S(T,{key:1,type:"danger"},{default:l(()=>e[10]||(e[10]=[p(" No ")])),_:1,__:[10]}))]),_:1}),a(V,{label:"Action",width:"150"},{default:l(({row:o})=>[a(m,{type:"primary",plain:"",size:"small",onClick:J=>w(o)},{default:l(()=>e[11]||(e[11]=[p(" Edit ")])),_:2,__:[11]},1032,["onClick"]),a(m,{type:"danger",size:"small",onClick:J=>I(o)},{default:l(()=>e[12]||(e[12]=[p(" Delete ")])),_:2,__:[12]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),h("div",Fe,[a(O,{backround:"",layout:s(n).layout,total:s(n).total,"page-size":s(n).pageSize,"current-page":s(n).currentPage,onCurrentChange:s(q),onSizeChange:s(N)},null,8,["layout","total","page-size","current-page","onCurrentChange","onSizeChange"])])]),_:1})),[[H,k.value||g.value]]),a(G,{title:F.value,modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),width:"500px"},{footer:l(()=>[a(m,{onClick:e[4]||(e[4]=o=>_.value=!1)},{default:l(()=>e[13]||(e[13]=[p(" Cancel ")])),_:1,__:[13]}),a(m,{type:"primary",loading:f.value,onClick:$},{default:l(()=>e[14]||(e[14]=[p(" Save ")])),_:1,__:[14]},8,["loading"])]),default:l(()=>[a(z,{model:i.value,rules:U.value,ref:"signedAppFormRef","label-width":"80px","label-position":"left"},{default:l(()=>[a(y,{label:"Domain",prop:"domain"},{default:l(()=>[a(d,{modelValue:i.value.domain,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.domain=o)},null,8,["modelValue"])]),_:1}),a(y,{label:"Cheat",prop:"is_cheat"},{default:l(()=>[a(j,{modelValue:i.value.is_cheat,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.is_cheat=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),je=ge(Ve,[["__scopeId","data-v-095427d6"]]);export{je as default};
