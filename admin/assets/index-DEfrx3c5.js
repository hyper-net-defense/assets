import{p as b}from"./index-Dy79iS0B.js";/* empty css                   */import{u as j}from"./usePagination-NdQ2qoRW.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                  */import{H as G,I as H,J,z as K,M as Q,y as X,N as Y,O as Z,n as ee,W as ae,Q as te,R as le,S as re,U as ne,V as oe,E as c,_ as ie}from"./element-B-FiLDCl.js";/* empty css                       */import{v as ue,r as m,aE as D,W as se,j as de,x as me,y as T,O as a,G as pe,F as t,u as n,K as _,E as ce,B as C}from"./vue-Cwi6Gi-M.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-5K_zVHhu.js";function ve(s){return b({url:"/admin/virtual_camera/list",method:"post",data:s})}function _e(s){return b({url:"/admin/virtual_camera/add",method:"post",data:s})}function ge(s){return b({url:"/admin/virtual_camera/update",method:"post",data:s})}function Ce(s){return b({url:"/admin/virtual_camera/delete",method:"post",data:{id:s}})}const he={class:"app-container"},ye={class:"toolbar-wrapper"},Ve={class:"table-wrapper"},be={class:"pager-wrapper"},Ee=ue({__name:"index",setup(s){const h=m(!1),f=m(!1),g=m(!1),y=m({name:""}),S=D("searchFormRef"),E=m([]),v=m(!1),k=m(""),o=m({id:"",name:"",pattern:""}),B=se({name:[{required:!0,trigger:"blur",message:"The name is required."}],pattern:[{required:!0,trigger:"blur",message:"The pattern is required."}]}),z=D("virtualCameraFormRef"),{paginationData:i,handleCurrentChange:N,handleSizeChange:q}=j();function p(){if(h.value)return;h.value=!0;const l={name:y.value.name,curPage:i.currentPage,pageSize:i.pageSize};ve(l).then(e=>{e.success&&e.data&&e.pagination?(E.value=e.data.virtual_camera_list,i.total=e.pagination.total):(E.value=[],i.total=0)}).finally(()=>{h.value=!1})}function R(l){l?(k.value="Edit Virtual Camera",o.value={...l}):(k.value="Add Virtual Camera",o.value={id:"",name:"",pattern:""}),v.value=!0}function U(){var l;f.value||(f.value=!0,(l=z.value)==null||l.validate(e=>{if(!e){c.error("The form validation failed."),f.value=!1;return}o.value.id?ge(o.value).then(u=>{u.success?(c.success("Succeed to update."),v.value=!1,p()):c.error(u.message||"Failed to update.")}).finally(()=>{f.value=!1}):_e(o.value).then(u=>{u.success?(c.success("Succeed to add."),v.value=!1,p()):c.error(u.message||"Failed to add.")}).finally(()=>{f.value=!1})}))}function $(l){ie.confirm(`Are you sure to delete this app "${l.name}"?`,"Confirm",{type:"warning"}).then(()=>{l.id&&(g.value||(g.value=!0,Ce(l.id).then(e=>{e.success?(c.success("Succeed to delete."),p()):c.error(e.message||"Failed to delete.")}).finally(()=>{g.value=!1})))}).catch(()=>{g.value=!1})}function A(){var l;(l=S.value)==null||l.resetFields(),p()}return de([()=>i.currentPage,()=>i.pageSize],p,{immediate:!0}),(l,e)=>{const u=J,V=H,d=K,x=G,P=Y,w=ee,F=re,I=le,L=ne,M=oe,O=Z;return T(),me("div",he,[a(P,{shadow:"never",class:"search-wrapper"},{default:t(()=>[a(x,{inline:!0,ref_key:"searchFormRef",ref:S,model:y.value},{default:t(()=>[a(V,{label:"Name",prop:"name"},{default:t(()=>[a(u,{modelValue:y.value.name,"onUpdate:modelValue":e[0]||(e[0]=r=>y.value.name=r),placeholder:"Search name",clearable:""},null,8,["modelValue"])]),_:1}),a(V,null,{default:t(()=>[a(d,{type:"primary",icon:n(Q),onClick:p},{default:t(()=>e[6]||(e[6]=[_(" Search ")])),_:1,__:[6]},8,["icon"]),a(d,{icon:n(X),onClick:A},{default:t(()=>e[7]||(e[7]=[_(" Reset ")])),_:1,__:[7]},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),pe((T(),ce(P,{shadow:"never"},{default:t(()=>[C("div",ye,[e[8]||(e[8]=C("div",null,null,-1)),C("div",null,[a(w,{content:"Add new"},{default:t(()=>[a(d,{type:"primary",icon:n(ae),circle:"",onClick:e[1]||(e[1]=r=>R())},null,8,["icon"])]),_:1}),a(w,{content:"Refresh current page"},{default:t(()=>[a(d,{type:"primary",icon:n(te),circle:"",onClick:p},null,8,["icon"])]),_:1})])]),C("div",Ve,[a(I,{data:E.value,stripe:""},{default:t(()=>[a(F,{prop:"name",label:"Name"}),a(F,{prop:"pattern",label:"Pattern"}),a(F,{label:"Action",width:"150"},{default:t(({row:r})=>[a(d,{plain:"",type:"primary",size:"small",onClick:W=>R(r)},{default:t(()=>e[9]||(e[9]=[_(" Edit ")])),_:2,__:[9]},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:W=>$(r)},{default:t(()=>e[10]||(e[10]=[_(" Delete ")])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),C("div",be,[a(L,{background:"",layout:n(i).layout,total:n(i).total,"page-size":n(i).pageSize,"current-page":n(i).currentPage,onCurrentChange:n(N),onSizeChange:n(q)},null,8,["layout","total","page-size","current-page","onCurrentChange","onSizeChange"])])]),_:1})),[[O,h.value||g.value]]),a(M,{title:k.value,modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=r=>v.value=r),width:"500px"},{footer:t(()=>[a(d,{onClick:e[4]||(e[4]=r=>v.value=!1)},{default:t(()=>e[11]||(e[11]=[_(" Cancel ")])),_:1,__:[11]}),a(d,{type:"primary",loading:f.value,onClick:U},{default:t(()=>e[12]||(e[12]=[_(" Save ")])),_:1,__:[12]},8,["loading"])]),default:t(()=>[a(x,{model:o.value,rules:n(B),ref_key:"virtualCameraFormRef",ref:z,"label-width":"120px","label-position":"left"},{default:t(()=>[a(V,{label:"Name",prop:"name"},{default:t(()=>[a(u,{modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.name=r)},null,8,["modelValue"])]),_:1}),a(V,{label:"Pattern",prop:"pattern"},{default:t(()=>[a(u,{modelValue:o.value.pattern,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.pattern=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Ie=fe(Ee,[["__scopeId","data-v-2f1118bc"]]);export{Ie as default};
