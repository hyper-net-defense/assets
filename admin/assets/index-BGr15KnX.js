import{p as h}from"./index-Dy79iS0B.js";/* empty css                   */import{u as j}from"./usePagination-NdQ2qoRW.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                  */import{H as G,I as H,J,z as K,M as Q,y as X,N as Y,O as Z,n as ee,W as ae,Q as le,R as te,S as ne,U as oe,V as se,E as c,_ as re}from"./element-B-FiLDCl.js";/* empty css                       */import{v as ie,r as d,aE as x,W as pe,j as ue,x as de,y as D,O as a,G as me,F as l,u as r,K as g,E as ce,B as y}from"./vue-Cwi6Gi-M.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vxe-5K_zVHhu.js";function _e(p){return h({url:"/admin/vpn_app/list",method:"post",data:p})}function ve(p){return h({url:"/admin/vpn_app/add",method:"post",data:p})}function ge(p){return h({url:"/admin/vpn_app/update",method:"post",data:p})}function Ve(p){return h({url:"/admin/vpn_app/delete",method:"post",data:{id:p}})}const ke={class:"app-container"},ye={class:"toolbar-wrapper"},Ce={class:"table-wrapper"},be={class:"pager-wrapper"},he=ie({__name:"index",setup(p){const C=d(!1),f=d(!1),V=d(!1),b=d({name:""}),w=x("searchFormRef"),A=d([]),_=d(!1),E=d(""),o=d({id:"",name:"",link:"",process_win:"",process_mac:""}),N=pe({name:[{required:!0,trigger:"blur",message:"The name is required."}],link:[{required:!0,trigger:"blur",message:"The link is required."}]}),F=x("vpnAppFormRef"),{paginationData:i,handleCurrentChange:T,handleSizeChange:B}=j();function m(){if(C.value)return;C.value=!0;const n={name:b.value.name,curPage:i.currentPage,pageSize:i.pageSize};_e(n).then(e=>{e.success&&e.data&&e.pagination?(A.value=e.data.vpn_app_list,i.total=e.pagination.total):(A.value=[],i.total=0)}).finally(()=>{C.value=!1})}function S(n){n?(E.value="Edit VPN App",o.value={...n}):(E.value="Add VPN App",o.value={id:"",name:"",link:"",process_win:"",process_mac:""}),_.value=!0}function U(){var n;f.value||(f.value=!0,(n=F.value)==null||n.validate(e=>{if(!e){c.error("The form validation failed."),f.value=!1;return}o.value.id?ge(o.value).then(s=>{s.success?(c.success("Succeed to update."),_.value=!1,m()):c.error(s.message||"Failed to update.")}).finally(()=>{f.value=!1}):ve(o.value).then(s=>{s.success?(c.success("Succeed to add."),_.value=!1,m()):c.error(s.message||"Failed to add.")}).finally(()=>{f.value=!1})}))}function L(n){re.confirm(`Are you sure to delete this app "${n.name}"?`,"Confirm",{type:"warning"}).then(()=>{n.id&&(V.value||(V.value=!0,Ve(n.id).then(e=>{e.success?(c.success("Succeed to delete."),m()):c.error(e.message||"Failed to delete.")}).finally(()=>{V.value=!1})))}).catch(()=>{V.value=!1})}function q(){var n;(n=w.value)==null||n.resetFields(),m()}return ue([()=>i.currentPage,()=>i.pageSize],m,{immediate:!0}),(n,e)=>{const s=J,v=H,u=K,P=G,z=Y,R=ee,k=ne,M=te,$=oe,I=se,W=Z;return D(),de("div",ke,[a(z,{shadow:"never",class:"search-wrapper"},{default:l(()=>[a(P,{inline:!0,ref_key:"searchFormRef",ref:w,model:b.value},{default:l(()=>[a(v,{label:"Name",prop:"name"},{default:l(()=>[a(s,{modelValue:b.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>b.value.name=t),placeholder:"Search name",clearable:""},null,8,["modelValue"])]),_:1}),a(v,null,{default:l(()=>[a(u,{type:"primary",icon:r(Q),onClick:m},{default:l(()=>e[8]||(e[8]=[g(" Search ")])),_:1,__:[8]},8,["icon"]),a(u,{icon:r(X),onClick:q},{default:l(()=>e[9]||(e[9]=[g(" Reset ")])),_:1,__:[9]},8,["icon"])]),_:1})]),_:1},8,["model"])]),_:1}),me((D(),ce(z,{shadow:"never"},{default:l(()=>[y("div",ye,[e[10]||(e[10]=y("div",null,null,-1)),y("div",null,[a(R,{content:"Add new"},{default:l(()=>[a(u,{type:"primary",icon:r(ae),circle:"",onClick:e[1]||(e[1]=t=>S())},null,8,["icon"])]),_:1}),a(R,{content:"Refresh current page"},{default:l(()=>[a(u,{type:"primary",icon:r(le),circle:"",onClick:m},null,8,["icon"])]),_:1})])]),y("div",Ce,[a(M,{data:A.value,stripe:""},{default:l(()=>[a(k,{prop:"name",label:"Name"}),a(k,{prop:"link",label:"Link"}),a(k,{prop:"process_win",label:"Win Process"}),a(k,{prop:"process_mac",label:"Mac Process"}),a(k,{label:"Action",width:"150"},{default:l(({row:t})=>[a(u,{plain:"",type:"primary",size:"small",onClick:O=>S(t)},{default:l(()=>e[11]||(e[11]=[g(" Edit ")])),_:2,__:[11]},1032,["onClick"]),a(u,{type:"danger",size:"small",onClick:O=>L(t)},{default:l(()=>e[12]||(e[12]=[g(" Delete ")])),_:2,__:[12]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),y("div",be,[a($,{background:"",layout:r(i).layout,total:r(i).total,"page-size":r(i).pageSize,"current-page":r(i).currentPage,onCurrentChange:r(T),onSizeChange:r(B)},null,8,["layout","total","page-size","current-page","onCurrentChange","onSizeChange"])])]),_:1})),[[W,C.value||V.value]]),a(I,{title:E.value,modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=t=>_.value=t),width:"500px"},{footer:l(()=>[a(u,{onClick:e[6]||(e[6]=t=>_.value=!1)},{default:l(()=>e[13]||(e[13]=[g(" Cancel ")])),_:1,__:[13]}),a(u,{type:"primary",loading:f.value,onClick:U},{default:l(()=>e[14]||(e[14]=[g(" Save ")])),_:1,__:[14]},8,["loading"])]),default:l(()=>[a(P,{model:o.value,rules:r(N),ref_key:"vpnAppFormRef",ref:F,"label-width":"120px","label-position":"left"},{default:l(()=>[a(v,{label:"Name",prop:"name"},{default:l(()=>[a(s,{modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.name=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Link",prop:"link"},{default:l(()=>[a(s,{modelValue:o.value.link,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.link=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Win Process",prop:"process_win"},{default:l(()=>[a(s,{modelValue:o.value.process_win,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.process_win=t)},null,8,["modelValue"])]),_:1}),a(v,{label:"Mac Process",prop:"process_mac"},{default:l(()=>[a(s,{modelValue:o.value.process_mac,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.process_mac=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Me=fe(he,[["__scopeId","data-v-d5255daa"]]);export{Me as default};
